# 任务12：字典

**密码攻击**

十次成功的渗透测试至少七次和密码攻击有关，目前主要的密码攻击方式是基于字典。

**在线破解**

在线破解就是反复输入密码在目标服务器进行尝试

**离线破解**

用字典进行哈希之后进行比对,比较常见的场景是mysql数据库密码离线破解的场景

# 任务13：爆破；在线破解；哈希攻击（一）；

## 工具介绍

medusa:合适标准协议的破解,常用于非http协议的破解

crowbar:支持少量很麻烦的协议破解,擅长ssh公钥、ipsec、rdp、vnc四种协议的破解。

hydra:支持的协议比较多,对于http还支持post表达的爆破。常用于考试的时候http的post表达的破解（考试不允许用burp pro版本,但是burp ce的速度又很慢）

hashid:识别哈希的加密类型

mimikatz:支持从数据库、内存、缓存中读取windows密码哈希的强大工具,但是需要拿到system权限。

john、hashcat:支持分分布式破解,速度都很快

## linux密码哈希

以`$`为划分,第一位表示哈希算法,第二位表示盐,第三位才是密码的哈希

[参考链接](https://www.cyberciti.biz/faq/understanding-etcshadow-file/)

## windows密码哈希

windows使用的是NTLM算法,但仍然不加盐。密码哈希值保存在SAM数据库中，并且这个数据库的字段目前也是黑盒的。

一旦系统登陆，系统将会把密码缓存在LSASS这个进程的内存中。

## windows密码破解

1. **哈希碰撞**：常用于**本地密码破解**场景,利用mimikatz从其他进程的内存中读取密码哈希,再用字典去进行密码碰撞。
2. **PtH(Pass the Hash)攻击**：常用于**内网密码破解**场景,内网认证流程是来自服务端的**随机数**+本地**密码哈希**再进行哈希计算,所以我们只需要知道本地的密码哈希就能进行认证绕过

# 任务14：哈希攻击（二）；

hashcat能力介绍:

1. **变形密码的生成**:比如开头大写,密码后面加固定的数字组合等。常用的规则集合放在`/usr/share/hashcat/rules`
2. **ssh加密密钥破解**:sshkey支持双因子认证(密钥+口令),把私钥文件交给hashcat也可以实现密码爆破
3. **密钥管理系统密码破解**:常用的密钥管理系统keeppass可以用于口令存储,hashcat提供这款密钥关系系统的口令爆破