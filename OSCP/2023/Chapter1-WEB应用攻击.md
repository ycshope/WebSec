# 任务2：WEB应用评估方法；WEB 枚举；WEB安全工具；攻击WEB漏洞（XSS）

## web安全现状

webapp存在各种各样的来自不同开发者开发的组件,各个开发者对于安全的理解也不一样,任何一个组件存在安全问题都可能会导致整个webapp出现安全问题,这就使得webapp**暴露出很大的攻击面**。所以对于webhacker而言首先就是要尽可能**找出web的所有组件**。

## web枚举

- 识别目标系统技术栈

- 攻击载荷需要基于目标应用技术栈基础来构建
  - 编程语言和框架
  - web服务器软件
  - 数据库
  - 操作系统
- 从浏览器可以收集很多信息
- 分析URL
  - 文件拓展名可用于发现目标系统开发语言(php)
  - 不同框架的文件拓展名很大，基于java的程序可能使用jsp、do、html等
  - 现代的web架构越来越多使用**基于路由**来实现URL映射,使得拓展名在很大程度上不再重要

## 关注点

- 前端脚本：可能会返回一些后端的url
- 响应头：可能会包含一些敏感信息
  - server：web的中间件和版本
  - x-amz-cf-id：应用使用amazon cloudfront



## 站点地图&管理后台

- 站点地图帮助：可能会包含一些敏感路径或者管理员后台
  - /robot.txt：站点不希望你/爬虫访问的
  - /sitemap.xml：站点希望你/爬虫访问的
  - humans.txt：人员信息
- 定位后台地址：后台可能开启在**不同端口**或者URL,经常被限制为本地访问或其他特殊端口访问呢
  - tomcat：/manager.html
  - phpmyadmin：/phpmyadmin



## 路径枚举

手工可能效率比较低可以借助自动化工具提高效率,但要注意有些时候目标可能会对**访问频率做出限制**,这时候可以考虑适当调低爬取速度-

- 常用的工具：dirb、gobuster、dirsearch
- 针对性的工具：wpscan

## 攻击管理后台

- 发现后台，登录后台(默认账号密码、枚举信息猜账号密码、爆破)
- 由于账号锁定机制，爆破容易被管理员发现
- 成功登录后台后可以看看后台的供能，是否可能造成代码执行



# 任务3：攻击WEB漏洞（XSS）；攻击WEB漏洞（文件包含）；

## XSS

xss通常不会考复杂

# 任务4：攻击WEB漏洞（文件包含）；攻击WEB漏洞（SQL）；

## 文件包含

- php文件包含常用的协议:file、http、data

- php文件包含常用的攻击手段：
  - 文件上传+目录穿越+文件包含=RCE
  - 日志写入(apache日志、ssh日志)+目录穿越+文件包含=RCE
- 常用的绕过方法：data协议+base64

## 命令执行

通常而言用各种linux的命令链接字符绕过就行

# 任务5：攻击WEB漏洞（SQL）；

## 文件上传

oscp侧重点是全流程的渗透,在绕过方面不会太为难考生

## SQL注入

mysql以#作为注释,可以作为payload的结尾